<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="fragments/layout :: layout (~{::title}, ~{::section})">
<head><title>Members</title></head>
<body>
<section>
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Members</h3>
    <form class="d-flex" method="get">
      <input class="form-control me-2" type="search" name="q" th:value="${q}" placeholder="Search name/email...">
      <button class="btn btn-primary">Search</button>
      <a class="btn btn-success ms-2" th:href="@{/members/new}">+ New</a>
    </form>
  </div>
  <table class="table table-striped table-hover">
    <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Status</th><th></th></tr></thead>
    <tbody>
    <tr th:each="r: ${members}">
      <td th:text="${r.get('member_id')}"></td>
      <td th:text="${r.get('full_name')}"></td>
      <td th:text="${r.get('email')}"></td>
      <td th:text="${r.get('phone')}"></td>
      <td th:text="${r.get('status')}"></td>
      <td class="text-nowrap">
        <a class="btn btn-sm btn-outline-primary" th:href="@{|/members/${r.get('member_id')}/edit|}">Edit</a>
        <form th:action="@{|/members/${r.get('member_id')}/delete|}" method="post" style="display:inline-block">
          <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete?')">Delete</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
</section>
</body>
</html>
