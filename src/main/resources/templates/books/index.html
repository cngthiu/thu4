<!-- src/main/resources/templates/books/index.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/layout :: layout (~{::title}, ~{::section})">
<head><title>Books</title></head>
<body>
<section>
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Books</h3>
    <form class="d-flex" method="get">
      <input class="form-control me-2" type="search" name="q" th:value="${q}" placeholder="Search title, author, category...">
      <button class="btn btn-primary">Search</button>
      <a class="btn btn-success ms-2" th:href="@{/books/new}">+ New</a>
    </form>
  </div>
  <table class="table table-striped table-hover">
    <thead><tr>
      <th>ID</th><th>Title</th><th>Author</th><th>Category</th><th>Price</th><th>Stock</th><th>Status</th><th></th>
    </tr></thead>
    <tbody>
    <tr th:each="book : ${books}">
      <td th:text="${book.bookId}"></td>
      <td th:text="${book.title}"></td>
      <td th:text="${book.authorName}">Unknown</td>
      <td th:text="${book.categoryName}">Unknown</td>
      <td th:text="${book.price}"></td>
      <td th:text="${book.stock}"></td>
      <td th:text="${book.status}"></td>
      <td class="text-nowrap">
        <a class="btn btn-sm btn-outline-primary" th:href="@{|/books/${book.bookId}/edit|}">Edit</a>
        <form th:action="@{|/books/${book.bookId}/delete|}" method="post" style="display:inline-block">
          <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete?')">Delete</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
</section>
</body>
</html>
